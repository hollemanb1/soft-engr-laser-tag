<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Laser Tag App</title>
  <style>
    body, html {
      margin: 0; padding: 0; height: 100%;
      font-family: 'Orbitron', sans-serif;
      background: #111;
    }
    #splash {
      position: fixed; inset: 0;
      display: flex; align-items: center; justify-content: center;
      background: #000;
      overflow: hidden;
      z-index: 1000;
    }
    #splash.hidden { opacity: 0; visibility: hidden; transition: opacity .35s ease; }

    .neon {
      color: #0ff; font-size: 3rem;
      text-shadow: 0 0 5px #0ff, 0 0 10px #0ff, 0 0 20px #0ff, 0 0 40px #0ff;
      animation: flicker 2.5s infinite alternate;
    }
    @keyframes flicker {
      from { opacity: 1; text-shadow: 0 0 5px #0ff, 0 0 10px #0ff, 0 0 20px #0ff, 0 0 40px #0ff; }
      to   { opacity: .8; text-shadow: 0 0 2px #0ff, 0 0 5px #0ff, 0 0 10px #0ff; }
    }

    #app { display: none; color: #fff; padding: 20px; }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">
</head>
<body>
  <div id="splash">
    <div class="neon">⚡ Welcome to Laser Tag ⚡</div>
  </div>

  <div id="app">
    <h1>Main App Content</h1>
    <p>This is where your laser tag project will run!</p>
  </div>

  <script>
    function tvTurnOff(container, {
      duration = 2200,   // slower: ~2.2s for shutters
      flashDur = 700,    // slower flash: ~0.7s
      onFinish = null
    } = {}) {
      let top = container.querySelector('.tv-shutter-top');
      let bot = container.querySelector('.tv-shutter-bottom');
      let line = container.querySelector('.tv-flash');

      if (!top) {
        top = document.createElement('div');
        bot = document.createElement('div');
        line = document.createElement('div');
        top.className = 'tv-shutter-top';
        bot.className = 'tv-shutter-bottom';
        line.className = 'tv-flash';

        Object.assign(top.style,  {position:'absolute',left:0,right:0,top:0,height:'0px',background:'#000'});
        Object.assign(bot.style,  {position:'absolute',left:0,right:0,bottom:0,height:'0px',background:'#000'});
        Object.assign(line.style, {position:'absolute',left:0,width:'100%',top:'50%',height:'2px',background:'#fff',
                                   transform:'translateY(-50%) scaleX(0.9)',opacity:0,
                                   boxShadow:'0 0 10px #fff, 0 0 25px #fff, 0 0 40px #fff'});
        container.append(top, bot, line);
      }

      const h = container.clientHeight || window.innerHeight;
      const shutterEnd = duration * 0.75;
      const flashStart = Math.max(0, shutterEnd - 150); // delay flash a bit more

      const shutterKF = [{height:'0px'},{height:(h/2)+'px'}];
      const shutterTiming = {duration: shutterEnd, fill:'forwards', easing:'cubic-bezier(.3,.7,.4,1)'};
      top.animate(shutterKF, shutterTiming);
      bot.animate(shutterKF, shutterTiming);

      line.animate([
        {opacity:0,   transform:'translateY(-50%) scaleX(0.9)'},
        {opacity:1,   offset:0.15, transform:'translateY(-50%) scaleX(1)'},
        {opacity:0.9, offset:0.6,  transform:'translateY(-50%) scaleX(0.3)'},
        {opacity:0,   transform:'translateY(-50%) scaleX(0)'}
      ], {duration: flashDur, delay: flashStart, fill:'forwards', easing:'ease-out'});

      const longest = Math.max(duration, flashStart + flashDur);
      setTimeout(() => {
        top.style.height = (h/2)+'px';
        bot.style.height = (h/2)+'px';
        line.style.opacity = 0;
        if (typeof onFinish === 'function') onFinish();
      }, longest);
    }

    window.addEventListener('load', () => {
      const splash = document.getElementById('splash');
      const app = document.getElementById('app');

      const SPLASH_TIME = 4000; // neon shows for ~4s
      setTimeout(() => {
        tvTurnOff(splash, {
          duration: 2200,  // slower shutters
          flashDur: 700,   // slower flash
          onFinish: () => {
            splash.classList.add('hidden');
            setTimeout(() => {
              splash.style.display = 'none';
              app.style.display = 'block';
            }, 300);
          }
        });
      }, SPLASH_TIME);
    });
  </script>
</body>
</html>
